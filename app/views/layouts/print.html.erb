<!DOCTYPE html>
<html>
  <head>
    <title>Hóa đơn #<%= yield(:title) %> - Giặt Sấy Sạch</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
      @media print {
        .no-print {
          display: none !important;
        }
        
        body {
          font-size: 12pt;
          line-height: 1.4;
        }
        
        .invoice {
          max-width: 100%;
          margin: 0;
        }
        
        .btn {
          display: none;
        }
        
        .card {
          border: 1px solid #ddd !important;
          box-shadow: none !important;
        }
        
        .page-break {
          page-break-after: always;
        }
        
        @page {
          margin: 1cm;
        }
      }
      
      @media screen {
        body {
          background-color: #f8f9fa;
          padding: 20px 0;
        }
        
        .invoice {
          background: white;
          max-width: 800px;
          margin: 0 auto;
          box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .print-actions {
          position: fixed;
          top: 20px;
          right: 20px;
          z-index: 1000;
        }
      }
      
      .invoice-header {
        border-bottom: 3px solid #007bff;
        margin-bottom: 30px;
        padding-bottom: 20px;
      }
      
      .invoice-title {
        font-size: 2.5rem;
        font-weight: bold;
        color: #007bff;
      }
      
      .invoice-number {
        font-size: 1.2rem;
        color: #6c757d;
      }
      
      .business-info {
        text-align: right;
      }
      
      .invoice-details table {
        font-size: 0.95rem;
      }
      
      .invoice-total {
        background-color: #f8f9fa;
        border: 2px solid #007bff;
        border-radius: 0.5rem;
        padding: 20px;
        margin-top: 30px;
      }
      
      .total-amount {
        font-size: 1.8rem;
        font-weight: bold;
        color: #007bff;
      }
      
      .invoice-footer {
        margin-top: 40px;
        padding-top: 20px;
        border-top: 1px solid #dee2e6;
        text-align: center;
        color: #6c757d;
        font-size: 0.9rem;
      }
      
      .status-badge {
        font-size: 1.1rem;
        padding: 0.5rem 1rem;
      }
      
      .timeline-print {
        font-size: 0.9rem;
      }
      
      .timeline-print .timeline-item {
        margin-bottom: 15px;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 0.375rem;
      }
    </style>
  </head>

  <body>
    <!-- Print Actions (hidden when printing) -->
    <div class="print-actions no-print">
      <div class="btn-group-vertical">
        <button onclick="window.print()" class="btn btn-primary btn-lg">
          <i class="fas fa-print me-2"></i>In hóa đơn
        </button>
        <a href="javascript:history.back()" class="btn btn-outline-secondary">
          <i class="fas fa-arrow-left me-2"></i>Quay lại
        </a>
      </div>
    </div>

    <!-- Invoice Content -->
    <div class="invoice">
      <%= yield %>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
      // Auto print when loaded (optional)
      // window.addEventListener('load', function() {
      //   setTimeout(() => window.print(), 500);
      // });
      
      // Close window after printing
      window.addEventListener('afterprint', function() {
        // Uncomment if you want to close window after printing
        // window.close();
      });
    </script>
  </body>
</html>